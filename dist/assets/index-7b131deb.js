import{j as s,L as E,T as i,r as n,u as j}from"./index-7f96bb1f.js";import{d as S,u as b,a as T,S as F,G as L}from"./styles-b8804c7a.js";import{T as Q,L as v,a as C}from"./list-loader-98e06528.js";import{c as a}from"./queries-643557d4.js";function R(e){return s.jsx(E,{to:"/episodes/"+e.id,children:s.jsxs(S,{children:[s.jsx(i,{variant:"h6",align:"center",children:e.name}),s.jsx(i,{variant:"body2",align:"center",color:"rgba(0, 0, 0, 0.6)",children:e.air_date}),s.jsx(i,{fontWeight:700,align:"center",className:"ep-code",color:"rgba(0, 0, 0, 0.6)",children:e.episode})]})})}const _=a("1",{});function O(){var u,x,m,p;const{data:e,loading:c,error:k,fetchMore:l}=b(_),[g,h]=n.useState(""),o=n.useRef(),f=()=>{e&&l({query:a(e.episodes.info.next,d(g)),updateQuery:j("episodes")})},y=()=>{o.current!==null&&clearTimeout(o.current)},d=n.useCallback(r=>{const t={};return r.match(/[S\d+E\d]/g)?t.episode=r:t.name=r,t},[]);return s.jsx(T,{children:s.jsxs("div",{className:"container",children:[s.jsx("img",{src:"./episodes.svg",alt:"logo"}),s.jsx(F,{sx:{marginTop:"16px"},children:s.jsx(Q,{label:"Filter by name or episode (ex. S01 or S01E02)",sx:{width:"500px !important"},className:"search",onChange:r=>{const t=r.target.value;y(),o.current=setTimeout(()=>{l({query:a("1",d(t)),updateQuery:j("none")})},300),h(t)}})}),s.jsxs(L,{children:[s.jsx(v,{loading:c,data:((u=e==null?void 0:e.episodes)==null?void 0:u.results)??[]}),(((x=e==null?void 0:e.episodes)==null?void 0:x.results)??[]).map(r=>s.jsx(R,{...r},r.id))]}),(p=(m=e==null?void 0:e.episodes)==null?void 0:m.info)!=null&&p.next?s.jsx(C,{onClick:f,loading:c}):s.jsx(s.Fragment,{})]})})}export{O as default};
